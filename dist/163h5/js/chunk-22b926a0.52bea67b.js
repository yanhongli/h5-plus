(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-22b926a0"],{"40b4":function(e,t,a){"use strict";var s=a("60ad"),n=a.n(s);n.a},"60ad":function(e,t,a){},9922:function(e,t,a){"use strict";a.d(t,"a",(function(){return p}));var s=a("e7f2"),n=a("7677"),i=a("1212"),l=a("3683"),o=a("2a96"),c=a.n(o),r=a("d6e9"),d=a("5dea"),u=a("6ca7"),m=c()(),v=Object(r["a"])((new Date).setFullYear(2019));function p(e){return{dialog:{config:{model:{},visible:!1},del:{model:{},visible:!1},eventName:{model:{conversionName:{value:"",error:""},id:{value:"",error:""}},visible:!1}},selects:[{key:"status",value:"-1",list:[{value:"-1",label:"全部未删除"},{value:"0",label:"活跃"},{value:"1",label:"未活跃"},{value:"2",label:"已删除"}]},{key:"mode",value:"-1",list:[{value:"-1",label:"全部监测方式"},{value:"0",label:"JS部码"},{value:"1",label:"XPath"}]}],eventInput:"",pickerOptions:{shortcuts:s["a"],disabledDate:function(t){return Object(i["a"])(t,m)||Object(n["a"])(t,v)||e.checkedStartDate&&Math.abs(Object(l["a"])(t,e.checkedStartDate))>89},onPick:function(t){var a=t.maxDate,s=t.minDate;e.checkedStartDate=a||s}},dateRange:[Object(d["a"])(Object(u["a"])(),6),Object(u["a"])()],tableData:[],tableColumns:["id","conversionName","status","conversionTypeName","mode","landingPageName","url","browse","visitor","conversionAmount","createTime","operate"],customStates:{id:{name:"事件ID",checked:!1,tempChecked:!1,width:120},conversionName:{name:"事件名称",checked:!0,tempChecked:!0,width:250},status:{name:"状态",checked:!0,tempChecked:!0,width:110},conversionTypeName:{name:"事件类型",checked:!0,tempChecked:!0,width:120},mode:{name:"监测方式",checked:!0,tempChecked:!0,width:120},landingPageName:{name:"落地页名称",checked:!0,tempChecked:!0,width:180},url:{name:"落地页URL",checked:!1,tempChecked:!1,width:120},browse:{name:"浏览量",checked:!0,tempChecked:!0,width:120},visitor:{name:"访问量",checked:!0,tempChecked:!0,width:120},conversionAmount:{name:"转化量",checked:!0,tempChecked:!0,width:120},createTime:{name:"创建时间",checked:!0,tempChecked:!0,width:200},operate:{name:"操作",checked:!0,tempChecked:!0,width:"auto",minWidth:240},fInfo:{name:"事件信息",checked:!0,tempChecked:!0},sInfo:{name:"基础指标",checked:!0,tempChecked:!0}},customGroups:[{key:"fInfo",isIndeterminate:!1,children:["id","conversionName","status","conversionTypeName","mode","landingPageName","url","createTime"]},{key:"sInfo",isIndeterminate:!1,children:["browse","visitor","conversionAmount"]}],page:{size:10,current:1,total:0},conversionNameEdition:{id:"",value:""}}}},bf97:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"main"},[a("el-card",[a("el-row",{staticClass:"inputs",attrs:{type:"flex"}},[a("router-link",{attrs:{"active-class":"active",to:"/sdk/create"}},[a("el-button",{attrs:{type:"primary",size:"small"}},[a("span",[e._v("+")]),e._v("\n            添加监测事件\n          ")])],1),a("section",{staticStyle:{"margin-left":"auto"}},[e._l(e.selects,(function(t){return a("el-select",{key:t.key,staticClass:"search-input mr-10",attrs:{placeholder:"请选择",size:"small"},model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"select.value"}},e._l(t.list,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)})),a("el-input",{staticClass:"search-input mr-10",attrs:{placeholder:"落地页名称/事件名称",size:"small",maxlength:"50"},model:{value:e.eventInput,callback:function(t){e.eventInput=t},expression:"eventInput"}}),a("el-date-picker",{staticStyle:{width:"250px","margin-right":"20px"},attrs:{clearable:!1,type:"daterange",pickerOptions:e.pickerOptions,align:"right",placeholder:"选择日期",size:"small",format:"yyyy.MM.dd"},model:{value:e.dateRange,callback:function(t){e.dateRange=t},expression:"dateRange"}}),a("el-button",{staticClass:"mr-10 btn-n-width",attrs:{type:"primary",size:"small"},on:{click:function(t){return e.search()}}},[e._v("查询")])],2)],1),a("el-row",[a("CustomColumn",{attrs:{states:e.customStates,groups:e.customGroups},on:{hidden:e.customHidden}})],1),a("div",[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData}},[e._l(e.tableColumns,(function(t){return[e.customStates[t].checked?a("el-table-column",{key:t,attrs:{prop:t,label:e.customStates[t].name,width:e.customStates[t].width,"min-width":e.customStates[t].minWidth},scopedSlots:e._u([{key:"header",fn:function(t){return[a("div",{staticStyle:{"padding-left":"25px","padding-right":"25px"}},[e._v("\n                  "+e._s(t.column.label)+"\n                  "),"status"==t.column.property?a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",placement:"bottom","popper-class":"c-tooltip"}},[a("div",{attrs:{slot:"content"},slot:"content"},[e._v("\n                      未活跃：当前转化事件还没有收集到转化数据\n                      "),a("br"),e._v("活跃：当前转化事件已收集到转化数据\n                      "),a("br"),e._v("已删除：已删除的转化事件不能二次修改，但是数据可正常上报\n                    ")]),a("i",{staticClass:"icon-question"})]):e._e()],1)]}},{key:"default",fn:function(t){return[a("section",{staticStyle:{"padding-left":"20px","padding-right":"20px"}},["conversionName"==t.column.property?a("section",{staticClass:"conversion-name"},[e.conversionNameEdition.id==t.row.id?[a("input",{directives:[{name:"model",rawName:"v-model",value:e.conversionNameEdition.value,expression:"conversionNameEdition.value"}],staticClass:"conversion-name-text",attrs:{type:"text",maxlength:"50"},domProps:{value:e.conversionNameEdition.value},on:{input:function(t){t.target.composing||e.$set(e.conversionNameEdition,"value",t.target.value)}}}),a("el-button",{staticClass:"conversion-btn",staticStyle:{"margin-left":"10px"},on:{click:function(a){return e.cancelConversionName(t.row)}}},[e._v("取 消")]),a("el-button",{staticClass:"conversion-btn",attrs:{type:"primary"},on:{click:function(a){return e.saveConversionName(t.row)}}},[e._v("保 存")])]:[a("span",{staticClass:"conversion-name-text"},[e._v(e._s(t.row.conversionName))]),a("i",{staticClass:"el-icon-edit",staticStyle:{"margin-left":"10px","vertical-align":"super"},on:{click:function(a){return e.editConversionName(t.row)}}})]],2):"status"==t.column.property?a("section",["活跃"==t.row.status?a("span",{staticClass:"status active"},[e._v(e._s(t.row.status))]):"未活跃"==t.row.status?a("span",{staticClass:"status unactive"},[e._v(e._s(t.row.status))]):a("span",{staticClass:"status"},[a("span",{staticClass:"dot"},[e._v("·")]),e._v("\n                      "+e._s(t.row.status)+"\n                    ")])]):"operate"==t.column.property?a("section",{staticClass:"op-link-group"},[a("span",{staticClass:"op-link",on:{click:function(a){return e.seeConfigs(t.row)}}},[e._v("查看设置")]),a("span",{class:{"op-link":!0,disabled:"已删除"==t.row.status},on:{click:function(a){return e.del(t.row)}}},[e._v("删除")]),a("span",{staticClass:"op-link"},[a("router-link",{attrs:{"active-class":"active",to:"/sdk/event-list/"+t.row.qs}},[a("span",{staticClass:"op-link"},[e._v("查看数据")])])],1)]):a("section",{staticClass:"text-ellipsis",attrs:{title:t.row[t.column.property]}},["browse"==t.column.property||"conversionAmount"==t.column.property||"visitor"==t.column.property?[e._v(e._s(e._f("numFormat")(t.row[t.column.property])))]:[e._v(e._s(t.row[t.column.property]))]],2)])]}}],null,!0)}):e._e()]}))],2),a("div",{staticClass:"mt-20"},[a("el-pagination",{attrs:{"page-sizes":[10,20,50,100],"page-size":e.page.size,"current-page":e.page.current,layout:"total, sizes, jumper,pager",total:e.page.total},on:{"size-change":function(t){return e.getTableData(!0)},"current-change":function(t){return e.getTableData(!1)},"update:pageSize":function(t){return e.$set(e.page,"size",t)},"update:page-size":function(t){return e.$set(e.page,"size",t)},"update:currentPage":function(t){return e.$set(e.page,"current",t)},"update:current-page":function(t){return e.$set(e.page,"current",t)}}})],1)],1)],1)],1),a("el-dialog",{attrs:{width:"30%",visible:e.dialog.config.visible,center:"",title:"查看设置详情"},on:{"update:visible":function(t){return e.$set(e.dialog.config,"visible",t)}}},[a("el-row",{staticClass:"mb-10",attrs:{type:"flex"}},[a("el-col",{staticClass:"text-right text-black flex-shrink-0",attrs:{span:6}},[a("label",{staticClass:"text-ellipsis"},[e._v("事件ID：")])]),a("span",[e._v(e._s(e.dialog.config.model.id))])],1),a("el-row",{staticClass:"mb-10",attrs:{type:"flex"}},[a("el-col",{staticClass:"text-right text-black flex-shrink-0",attrs:{span:6}},[a("label",[e._v("监测方式：")])]),a("span",{staticClass:"text-ellipsis"},[e._v(e._s(e.dialog.config.model.mode))])],1),a("el-row",{staticClass:"mb-10",attrs:{type:"flex"}},[a("el-col",{staticClass:"text-right text-black flex-shrink-0",attrs:{span:6}},[a("label",[e._v("事件名称：")])]),a("span",{staticClass:"text-ellipsis"},[e._v("\n        "+e._s(e.dialog.config.model.conversionName)+"\n      ")])],1),a("el-row",{staticClass:"mb-10",attrs:{type:"flex"}},[a("el-col",{staticClass:"text-right text-black flex-shrink-0",attrs:{span:6}},[a("label",[e._v("监测类型：")])]),a("span",{staticClass:"text-ellipsis"},[e._v(e._s(e.dialog.config.model.mode))])],1),a("el-row",{staticClass:"mb-10",attrs:{type:"flex"}},[a("el-col",{staticClass:"text-right text-black flex-shrink-0",attrs:{span:6}},[a("label",[e._v("落地页ID：")])]),a("span",{staticClass:"text-ellipsis"},[e._v("\n        "+e._s(e.dialog.config.model.landingPageId)+"\n      ")])],1),a("el-row",{staticClass:"mb-10",attrs:{type:"flex"}},[a("el-col",{staticClass:"text-right text-black flex-shrink-0",attrs:{span:6}},[a("label",[e._v("落地页名称：")])]),a("span",{staticClass:"text-ellipsis",attrs:{title:e.dialog.config.model.landingPageName}},[e._v(e._s(e.dialog.config.model.landingPageName))])],1),a("el-row",{staticClass:"mb-10",attrs:{type:"flex"}},[a("el-col",{staticClass:"text-right text-black flex-shrink-0",attrs:{span:6}},[a("label",[e._v("落地页URL：")])]),a("a",{staticClass:"text-ellipsis light-blue",attrs:{href:e.dialog.config.model.url,target:"_blank",title:e.dialog.config.model.url}},[e._v(e._s(e.dialog.config.model.url))])],1),e.dialog.config.model.elementUrlList?a("el-row",{staticClass:"mb-10",attrs:{type:"flex"}},[a("el-col",{staticClass:"text-right text-black flex-shrink-0",attrs:{span:6}},[a("label",[e._v("元素路径：")])]),a("el-col",e._l(e.dialog.config.model.elementUrlList,(function(t){return a("div",{key:t},[e._v(e._s(t))])})),0)],1):e._e(),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticClass:"btn-n-width",on:{click:function(t){e.dialog.config.visible=!1}}},[e._v("关 闭")])],1)],1),a("el-dialog",{attrs:{width:"30%",visible:e.dialog.del.visible,center:"",title:"删除落地页"},on:{"update:visible":function(t){return e.$set(e.dialog.del,"visible",t)}}},[a("el-row",{attrs:{type:"flex",justify:"center",align:"middle"}},[a("span",{staticClass:"body-warning"}),a("span",[e._v("该事件删除后，不能二次修改，您确定要删除？")])]),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticClass:"mr-30",on:{click:function(t){e.dialog.del.visible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.dialogOk("del")}}},[e._v("确 定")])],1)],1),a("el-dialog",{attrs:{width:"30%",visible:e.dialog.eventName.visible,center:"",title:"修改事件名称"},on:{"update:visible":function(t){return e.$set(e.dialog.eventName,"visible",t)}}},[a("el-row",{attrs:{type:"flex",justify:"center",align:"middle"}},[a("el-col",{attrs:{span:4}},[a("label",[e._v("事件名称：")])]),a("el-col",[a("el-input",{attrs:{placeholder:"请输入事件名称",maxlength:"50","show-word-limit":""},model:{value:e.dialog.eventName.model.conversionName.value,callback:function(t){e.$set(e.dialog.eventName.model.conversionName,"value",t)},expression:"dialog.eventName.model.conversionName.value"}}),a("div",{staticClass:"validate-text"},[e._v(e._s(e.dialog.eventName.model.conversionName.error))])],1)],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialog.eventName.visible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.dialogOk("eventName")}}},[e._v("确 定")])],1)],1)],1)},n=[],i=(a("8e6e"),a("456d"),a("ac6a"),a("75fc")),l=(a("7514"),a("bd86")),o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-popover",{attrs:{placement:"bottom",width:"357",trigger:"click"},on:{hide:e.hide},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[a("div",{staticClass:"columns-popover"},e._l(e.groups,(function(t){return a("div",{key:t.key},[a("el-row",[a("el-checkbox",{attrs:{indeterminate:t.isIndeterminate},on:{change:function(a){return e.change(t)}},model:{value:e.states[t.key].checked,callback:function(a){e.$set(e.states[t.key],"checked",a)},expression:"states[group.key].checked"}},[a("span",{staticClass:"group-title"},[e._v(e._s(e.states[t.key].name))])])],1),a("el-row",e._l(t.children,(function(s){return a("el-col",{key:s,attrs:{span:8}},[a("el-checkbox",{on:{change:function(a){return e.change(s,t)}},model:{value:e.states[s].checked,callback:function(t){e.$set(e.states[s],"checked",t)},expression:"states[child].checked"}},[a("span",{staticClass:"group-item-title"},[e._v(e._s(e.states[s].name))])])],1)})),1)],1)})),0),a("el-button",{staticClass:"fr btn-n-width",attrs:{slot:"reference",trigger:"click",size:"small"},slot:"reference"},[e._v("\n    自定义列\n    "),a("i",{class:{"el-icon-caret-bottom":!e.visible,"el-icon-caret-top":e.visible}})])],1)},c=[],r={props:["states","groups","confirm","hidden"],data:function(){return{visible:!1,restore:!1}},methods:{change:function(e,t){var a=this;if(e.children){e.children.forEach((function(t){a.states[t].checked=a.states[e.key].checked}));var s=e.children.filter((function(e){return a.states[e].checked})).length;e.isIndeterminate=s>0&&s<e.children.length}if(t){this.states[t.key].checked=t.children.every((function(e){return a.states[e].checked}));var n=t.children.filter((function(e){return a.states[e].checked})).length;t.isIndeterminate=n>0&&n<t.children.length}},hide:function(){this.$emit("hidden")},ok:function(){},cancel:function(){}}},d=r,u=(a("40b4"),a("2877")),m=Object(u["a"])(d,o,c,!1,null,"772379d2",null),v=m.exports,p=a("23ae"),h=a("9922"),f=a("b166");function g(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,s)}return a}function b(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?g(a,!0).forEach((function(t){Object(l["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):g(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var k={components:{CustomColumn:v},data:function(){var e=this;return b({},Object(h["a"])(e))},methods:{customHidden:function(){var e=JSON.stringify(this.customStates);localStorage["eventListCustomStates"]=e},seeConfigs:function(e){this.dialog.config.visible=!0,Object.assign(this.dialog.config.model,e)},del:function(e){"活跃"!=e.status?(this.dialog.del.visible=!0,this.dialog.del.model.id=e.id):this.$message.error("该落地页下已有监测任务，不能删除。")},modifyName:function(e){this.dialog.eventName.visible=!0,this.dialog.eventName.model.conversionName.value=e.conversionName,this.dialog.eventName.model.id.value=e.id},eMList:function(){var e=this,t=this.selects,a=this.dateRange,s=(t.find((function(e){return"mode"==e.key}))||{value:-1}).value,n=t.find((function(e){return"status"==e.key})).value,l={paramsName:this.eventInput,startTime:Object(f["a"])(a[0],"yyyy-MM-dd 00:00:00"),endTime:Object(f["a"])(a[1],"yyyy-MM-dd 23:59:59"),current:this.page.current,size:this.page.size};-1!=s&&(l.mode=s),-1!=n&&(l.status=n),Object(p["o"])(l).then((function(t){var a;e.tableData.length=0,(a=e.tableData).push.apply(a,Object(i["a"])(t.list)),e.tableData.forEach((function(e){return e.qs="".concat(e.landingPageId,"-").concat(e.conversionType,"-").concat(e.id),e.createTime=Object(f["a"])(new Date(e.createTime),"yyyy-MM-dd HH:mm:ss")})),e.page.total=t.total}))},search:function(){this.eMList()},getTableData:function(e){e&&(this.page.current=1),this.eMList()},dialogOk:function(e){var t=this,a=this.dialog[e].model;"del"===e&&(Object(p["k"])(a.id).then((function(){t.$message.success("删除成功"),t.eMList()})),this.dialog[e].visible=!1)},editConversionName:function(e){this.conversionNameEdition.id=e.id,this.conversionNameEdition.value=e.conversionName},cancelConversionName:function(e){this.conversionNameEdition.id=""},saveConversionName:function(e){var t=this;this.conversionNameEdition.value.length<=0?this.$message.error("请输入事件名称"):(this.conversionNameEdition.id="",Object(p["r"])({id:e.id,conversionName:this.conversionNameEdition.value}).then((function(){e.conversionName=t.conversionNameEdition.value,t.$message.success("修改名称成功")})))}},beforeMount:function(){var e=this;Object.assign(this.customStates,JSON.parse(localStorage["eventListCustomStates"]||"{}")),this.customGroups.forEach((function(t){var a=t.children.filter((function(t){return e.customStates[t].checked})).length;t.isIndeterminate=a>0&&a<t.children.length}))},mounted:function(){this.eMList()}},y=k,C=(a("d45b"),Object(u["a"])(y,s,n,!1,null,"28a2fa25",null));t["default"]=C.exports},c08b:function(e,t,a){},d45b:function(e,t,a){"use strict";var s=a("c08b"),n=a.n(s);n.a}}]);