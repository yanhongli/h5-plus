(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-75f958e8"],{"06b5":function(e,t,a){"use strict";var n=a("37ef"),l=a.n(n);l.a},"37ef":function(e,t,a){},dc8b:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"views-stay-time"},[a("el-card",[a("div",{staticClass:"clear page-select"},[a("label",[e._v("落地页名称：")]),a("page-select",{staticClass:"input"}),a("label",[e._v("日期：")]),a("el-date-picker",{staticClass:"input",staticStyle:{width:"250px"},attrs:{clearable:!1,type:"daterange",pickerOptions:e.pickerOptions,align:"right",placeholder:"选择日期",size:"small",format:"yyyy.MM.dd"},on:{blur:function(t){e.checkedStartDate=null}},model:{value:e.dateRanges,callback:function(t){e.dateRanges=t},expression:"dateRanges"}}),a("el-button",{staticClass:"btn",attrs:{disabled:e.loading,size:"small",type:"primary"},on:{click:function(t){return e.getPageData(!0)}}},[e._v("查询")])],1),a("div",{staticClass:"clear"}),a("muliti-line-chart",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"chart",attrs:{title:"浏览时长的转化分析",data:e.chartData,dataZoom:{start:0,end:300/1800*100}}})],1),a("el-card",{staticClass:"table-warp"},[a("div",{staticClass:"clear"},[a("el-popover",{ref:"colums-popover",attrs:{"popper-class":"colums-popover",width:350}},[a("el-row",[a("el-checkbox",{staticClass:"all",attrs:{indeterminate:e.getIndeterminateStatus(e.tableColumns.basicChecked,e.tableColumns.basic)},model:{value:e.checkAllBasicColumns,callback:function(t){e.checkAllBasicColumns=t},expression:"checkAllBasicColumns"}},[e._v("基础行为指标")])],1),a("el-row",[a("el-checkbox-group",{model:{value:e.tableColumns.basicChecked,callback:function(t){e.$set(e.tableColumns,"basicChecked",t)},expression:"tableColumns.basicChecked"}},e._l(e.tableColumns.basic,(function(e){return a("el-col",{key:e,attrs:{span:8}},[a("el-checkbox",{attrs:{label:e}})],1)})),1)],1),a("el-row",[a("el-checkbox",{staticClass:"all",attrs:{indeterminate:e.getIndeterminateStatus(e.tableColumns.conversionChecked,e.tableColumns.conversion)},model:{value:e.checkAllConversionColums,callback:function(t){e.checkAllConversionColums=t},expression:"checkAllConversionColums"}},[e._v("转化指标")])],1),a("el-row",[a("el-checkbox-group",{model:{value:e.tableColumns.conversionChecked,callback:function(t){e.$set(e.tableColumns,"conversionChecked",t)},expression:"tableColumns.conversionChecked"}},e._l(e.tableColumns.conversion,(function(e){return a("el-col",{key:e,attrs:{span:8}},[a("el-checkbox",{attrs:{label:e}})],1)})),1)],1)],1),a("el-button",{directives:[{name:"popover",rawName:"v-popover:colums-popover",arg:"colums-popover"}],staticClass:"fr custom-columns",attrs:{size:"mini",trigger:"click"}},[e._v("\n        自定义列\n        "),a("i",{staticClass:"el-icon-caret-bottom"})]),a("el-button",{staticClass:"fr export",attrs:{disabled:e.loading,type:"primary",size:"mini"},on:{click:function(t){return e.exportCSV()}}},[e._v("导出CSV")])],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"table",attrs:{data:e.tableData},on:{"sort-change":e.sortChangeHandler}},[a("el-table-column",{attrs:{label:"落地页名称",prop:"pageName"}}),a("el-table-column",{attrs:{label:"平均停留时长",prop:"intervalRange"}}),e.include("浏览量",e.tableColumns.basicChecked)?a("el-table-column",{attrs:{label:"浏览量",sortable:"custom",prop:"pv"}}):e._e(),e.include("访客量",e.tableColumns.basicChecked)?a("el-table-column",{attrs:{sortable:"custom",label:"访客量",prop:"uv"}}):e._e(),e.include("重复访客量",e.tableColumns.basicChecked)?a("el-table-column",{attrs:{sortable:"custom",label:"重复访客量",prop:"ruv"}}):e._e(),e.include("重复访客率",e.tableColumns.basicChecked)?a("el-table-column",{attrs:{label:"重复访客率",sortable:"custom",prop:"ruvRate"}}):e._e(),e.include("总转化量",e.tableColumns.conversionChecked)?a("el-table-column",{attrs:{label:"总转化量",sortable:"custom",prop:"convertTotal"}}):e._e(),e.include("总转化率",e.tableColumns.conversionChecked)?a("el-table-column",{attrs:{label:"总转化率",sortable:"custom",prop:"convertTotalRate"}}):e._e(),e.include("拨打电话",e.tableColumns.conversionChecked)?a("el-table-column",{attrs:{label:"拨打电话",sortable:"custom",prop:"callPhone"}}):e._e(),e.include("表单提交",e.tableColumns.conversionChecked)?a("el-table-column",{attrs:{label:"表单提交",sortable:"custom",prop:"formSubmit"}}):e._e(),e.include("订单",e.tableColumns.conversionChecked)?a("el-table-column",{attrs:{label:"订单",sortable:"custom",prop:"orderNums"}}):e._e(),e.include("购买",e.tableColumns.conversionChecked)?a("el-table-column",{attrs:{label:"购买",sortable:"custom",prop:"buyNums"}}):e._e(),e.include("有效咨询",e.tableColumns.conversionChecked)?a("el-table-column",{attrs:{label:"有效咨询",sortable:"custom",prop:"effectiveConsultin"}}):e._e(),e.include("微信复制",e.tableColumns.conversionChecked)?a("el-table-column",{attrs:{label:"微信复制",sortable:"custom",prop:"copyNums"}}):e._e(),e.include("应用下载",e.tableColumns.conversionChecked)?a("el-table-column",{attrs:{label:"应用下载",sortable:"custom",prop:"downloadNums"}}):e._e(),e.include("其他",e.tableColumns.conversionChecked)?a("el-table-column",{attrs:{label:"其他",sortable:"custom",prop:"others"}}):e._e()],1),a("div",{staticClass:"pager"},[a("el-pagination",{attrs:{"page-sizes":[10,20,50,100],"page-size":e.pageConfig.size,"current-page":e.pageConfig.current,layout:"total, sizes, jumper,pager",total:e.pageConfig.total},on:{"size-change":function(t){return e.getPageData(!1)},"current-change":function(t){return e.getPageData(!1)},"update:pageSize":function(t){return e.$set(e.pageConfig,"size",t)},"update:page-size":function(t){return e.$set(e.pageConfig,"size",t)},"update:currentPage":function(t){return e.$set(e.pageConfig,"current",t)},"update:current-page":function(t){return e.$set(e.pageConfig,"current",t)}}})],1)],1)],1)},l=[],s=(a("8e6e"),a("ac6a"),a("456d"),a("6762"),a("2fdb"),a("bd86")),o=a("75fc"),c=a("13f0"),r=a("92b8"),i=a("23ae"),u=(a("2f62"),a("f121")),b=a("1212"),d=a("96fd"),m=a("d6e9"),p=a("7677"),C=a("3683"),g=a("ee83"),h=a("5dea");a("375a");function f(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function v(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?f(a,!0).forEach((function(t){Object(s["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):f(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var k="stayTImeListBasicColumnsKey",O="stayTImeListConversionColumnsKey",y=Object(d["a"])(),D=Object(h["a"])(y,1),j=Object(m["a"])((new Date).setFullYear(2019)),w={components:{mulitiLineChart:c["a"],PageSelect:r["a"]},computed:{currentPageId:{get:function(){return this.$store.state.currentLandingPageId},set:function(e){this.$emit("change",e),this.$store.commit("setCurrentLandingPageId",e)}},checkAllBasicColumns:{get:function(){return this.tableColumns.basicChecked.length===this.tableColumns.basic.length},set:function(e){this.tableColumns.basicChecked=e?Object(o["a"])(this.tableColumns.basic):[]}},checkAllConversionColums:{get:function(){return this.tableColumns.conversionChecked.length===this.tableColumns.conversion.length},set:function(e){this.tableColumns.conversionChecked=e?Object(o["a"])(this.tableColumns.conversion):[]}}},data:function(){var e=this;return{loading:!1,pageConfig:{current:1,size:10,total:0},sortConfig:{dir:"",sort:""},tableColumns:{basicChecked:["浏览量","访客量","重复访客量","重复访客率"],basic:["浏览量","访客量","重复访客量","重复访客率"],conversionChecked:["总转化量","总转化率"],conversion:["总转化量","总转化率","拨打电话","表单提交","订单","购买","有效咨询","微信复制","应用下载","其他"]},tableData:[],dateRanges:[Object(h["a"])(D,6),D],checkedStartDate:null,chartData:{series:[],xaxisData:[]},pickerOptions:{shortcuts:u["a"],disabledDate:function(t){return Object(b["a"])(t,y)||Object(p["a"])(t,j)||e.checkedStartDate&&Math.abs(Object(C["a"])(t,e.checkedStartDate))>89},onPick:function(t){var a=t.maxDate,n=t.minDate;e.checkedStartDate=a&&n?null:a||n}}}},methods:{sortChangeHandler:function(e){var t=e.prop,a=e.order;a?(this.sortConfig.sort=t,this.sortConfig.dir="ascending"===a?"ASC":"DESC"):(this.sortConfig.sort="",this.sortConfig.dir=""),this.getPageData(!0)},getPageData:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.loading=!0;var a=v({},this.sortConfig,{limit:this.pageConfig.size,current:this.pageConfig.current,landingPageId:this.currentPageId,startTime:this.dateRanges[0],endTime:this.dateRanges[1]});t&&(this.pageConfig.size=10,this.pageConfig.current=1),Object(i["db"])(a).then((function(t){Object(i["hb"])(t.list),e.tableData=t.list||[],e.pageConfig.total=t.total,e.chartData=t.views||{xAxisData:[],seriesData:[]}})).finally((function(t){e.loading=!1}))},exportCSV:function(){var e=v({},this.sortConfig,{landingPageId:this.currentPageId,startTime:this.dateRanges[0],endTime:this.dateRanges[1]});Object(i["Q"])(e)},getIndeterminateStatus:function(e,t){return e.length>0&&e.length<t.length},include:function(e,t){return t.includes(e)}},watch:{"tableColumns.basicChecked":function(e){Object(g["b"])(k,e)},"tableColumns.conversionChecked":function(e){Object(g["b"])(O,e)}},created:function(){this.tableColumns.basicChecked=Object(g["a"])(k)||this.tableColumns.basicChecked,this.tableColumns.conversionChecked=Object(g["a"])(O)||this.tableColumns.conversionChecked,this.getPageData()}},P=w,_=(a("06b5"),a("2877")),x=Object(_["a"])(P,n,l,!1,null,null,null);t["default"]=x.exports}}]);