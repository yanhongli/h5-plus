(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0e7df0a0"],{"2d59":function(t,e,i){},"2de2":function(t,e,i){"use strict";var n=i("2d59"),a=i.n(n);a.a},"398e":function(t,e,i){},"63a5":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACwAAAAsCAYAAAAehFoBAAAAyElEQVRYR+2ZsQ0CMRAEd8EfkJIh0QMt0AaNQAf/gkKgDVqgB8RnpATAH7IQCQKye/nQOnS0Go/PlpYAMFrb9NZhY4Y5YJO8V85iS2KfBlheVjwyh73ecQBsXE7IT0l4roaYsWpsa2aLssM+05HcMdV2Kk+Db/jYMtWdRaD7yqjA3qclwiL8RkBKSAkp4e2ACIvwbwKaw96GiLAIaw57OyDCIqyXrmcHdOl6Bq6/hDdwERZhjTVvB/6AcLBSJlztFa5YzE5Hqm4fSFmVw0UUOwgAAAAASUVORK5CYII="},"805b":function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"views-covernt-track"},[i("el-card",{attrs:{header:"用户路径行为"}},[i("div",{staticClass:"inputs"},[i("label",[t._v("落地页:")]),i("el-select",{staticClass:"input",attrs:{disabled:"",size:"small"},model:{value:t.currentPageId,callback:function(e){t.currentPageId=e},expression:"currentPageId"}},t._l(t.landingPages,(function(t){return i("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1),i("label",[t._v("用户UID:")]),i("el-input",{staticClass:"input uid",attrs:{disabled:"",size:"small"},model:{value:t.query.uid,callback:function(e){t.$set(t.query,"uid",e)},expression:"query.uid"}})],1),i("div",{staticClass:"container"},[i("PageReplay",{staticClass:"replay",attrs:{url:t.currentPageUrl,empty:!t.conversionDetail,logs:t.conversionDetail.trackLogs}}),i("table",{staticClass:"info-table",staticStyle:{"border-collapse":"collapse"},attrs:{cellspacing:"0"}},[i("thead",[i("tr",[i("th",{attrs:{colspan:"2"}},[t._v("用户身份信息")])])]),i("tbody",[i("tr",[i("td",[t._v("姓名")]),i("td",[t._v(t._s(t.conversionDetail.name||"--"))])]),i("tr",[i("td",[t._v("手机号")]),i("td",[t._v(t._s(t.conversionDetail.mobile||"--"))])]),i("tr",[i("td",[t._v("IP")]),i("td",[t._v(t._s(t.conversionDetail.ip||"--"))])]),i("tr",[i("td",[t._v("访问时间")]),i("td",[t._v(t._s(t.conversionDetail.vistedTime||"--"))])]),i("tr",[i("td",[t._v("停留时长")]),i("td",[t._v("\n              "+t._s(t.conversionDetail.stayTime?t.conversionDetail.stayTime+"秒":"--")+"\n            ")])]),i("tr",[i("td",[t._v("访问深度")]),i("td",[t._v("\n              "+t._s(t.conversionDetail.pageDepth?(100*t.conversionDetail.pageDepth|t.numFormat)+"%":"--")+"\n            ")])]),i("tr",[i("td",[t._v("操作系统")]),i("td",[t._v(t._s(t.conversionDetail.os||"--"))])]),i("tr",[i("td",[t._v("运营商")]),i("td",[t._v(t._s(t.conversionDetail.operator||"--"))])])])])],1)])],1)},a=[],r=(i("8e6e"),i("ac6a"),i("456d"),i("7514"),i("bd86")),s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"brick-page-replay"},[t.empty?t._e():n("div",{staticClass:"controller"},[t.playConfig.timer?n("a",{staticClass:"play",on:{click:function(e){return t.stop()}}},[n("img",{attrs:{src:i("63a5"),alt:""}})]):n("a",{staticClass:"play",on:{click:function(e){return t.play()}}},[n("img",{attrs:{src:i("c4bf"),alt:""}})]),n("span",{staticClass:"time"},[t._v(t._s(t.playedSecond))]),t.showPrgress?n("el-progress",{staticClass:"progress",attrs:{"show-text":!1,percentage:t.playPercentage}}):t._e(),n("span",{staticClass:"time"},[t._v(t._s(t.totalSecond))])],1),n("div",{ref:"warp",staticClass:"warp",style:t.ifreamStyle},[t.empty?[t._m(0)]:[n("iframe",{ref:"iframe",staticClass:"show",attrs:{name:"h5page",frameborder:"0",id:"myiframe",src:"/api/proxy?url="+t.url}}),n("div",{staticClass:"mask",attrs:{id:"client-mask"}},[t.playConfig.timer?n("a",{on:{click:function(e){return t.stop()}}},[n("i",{staticClass:"el-icon-video-pause icon"})]):t._e(),t.playConfig.timer?t._e():n("a",{on:{click:function(e){return t.play()}}},[n("i",{staticClass:"el-icon-video-play icon"})])])]],2)])},o=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"empty"},[n("img",{attrs:{src:i("f3f6"),alt:""}}),n("p",{staticClass:"msg"},[t._v("暂无数据")])])}],c=(i("96cf"),i("3b8d")),l=(i("7f7f"),i("c5f6"),i("75fc")),u=i("0b1b"),h=i("b166"),f=i("fe1f"),m=i("a65d");function d(t,e){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");var i=Object(f["a"])(e);return Object(m["a"])(t,1e3*i)}var p={data:function(){return{showPrgress:!0,iframeWindow:window,scrollTop:0,pageData:[[]],touchPointElement:null,ifreamConfig:{width:375,height:667},playConfig:{startTime:0,endTime:0,currentTime:0,isStop:!0,timer:0,frameTime:100},timer:{click:0}}},props:{empty:{type:Boolean,default:!1},url:{type:String,default:""},logs:{type:Array}},computed:{ifreamStyle:function(){return{width:this.ifreamConfig.width+"px",height:this.ifreamConfig.height+"px"}},playedSecond:function(){try{var t=Object(u["a"])(new Date),e=Math.ceil((this.playConfig.currentTime-this.playConfig.startTime)/1e3);return Object(h["a"])(d(t,e),"mm:ss")}catch(i){return"00:00"}},totalSecond:function(){var t=Object(u["a"])(new Date),e=Math.ceil((this.playConfig.endTime-this.playConfig.startTime)/1e3);return Object(h["a"])(d(t,e||0),"mm:ss")},playPercentage:function(){var t=Math.max(this.playConfig.currentTime-this.playConfig.startTime,0),e=this.playConfig.endTime-this.playConfig.startTime;return Math.min(Math.ceil(t/e*100),100)||0},iframeDocument:function(){return this.iframeWindow?this.iframeWindow.document:document}},watch:{empty:function(){},logs:{immediate:!0,handler:function(){this.handlerData()}}},methods:{handlerData:function(){if(this.logs){var t=Object(l["a"])(this.logs);this.pageData=t,this.ifreamConfig.width=this.pageData[0].cw,this.ifreamConfig.height=this.pageData[0].ch,this.playConfig.startTime=this.pageData[0]["request_time"],this.playConfig.endTime=this.pageData[this.pageData.length-1]["request_time"],this.playConfig.currentTime=this.pageData[0]["request_time"]}},renderIframe:function(){var t=this,e=this.playConfig.currentTime,i=this.playConfig.currentTime+this.playConfig.frameTime;i>=this.playConfig.endTime&&this.stop();var n=this.pageData.filter((function(t){return t["request_time"]>e&&t["request_time"]<=i}));n.forEach((function(e){var i=e["request_time"]-t.playConfig.currentTime;window.setTimeout((function(){switch(e.ce&&"string"===typeof e.ce&&(e.ce=JSON.parse(e.ce)),e["dt"]){case"scroll":t.scroll(Number(e.st));break;case"ic":t.input(e);break;case"ts":t.touchStart(e);break;case"tm":t.touchMoveTo(e);break;case"mousemove":t.touchMoveTo(e);break;case"te":t.touchEnd();break;case"click":t.click();break;default:break}}),i)})),this.playConfig.currentTime=i},getElementByXpath:function(t){var e,i=this.iframeWindow.document.evaluate(t,this.iframeWindow.document,null,this.iframeWindow.XPathResult.ANY_TYPE,null),n=[];while(e=i.iterateNext())n.push(e);return n},scroll:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"smooth",i=Math.max(0,t-this.ifreamConfig.height);this.iframeWindow.scrollTo({top:i,behavior:e})},touchStart:function(t){this.iframeWindow.document.activeElement&&this.iframeWindow.document.activeElement.name!==name&&this.iframeWindow.$(this.iframeWindow.document.activeElement).blur(),this.touchPointElement?(this.touchMoveTo(t),this.touchPointElement.hidden=!1,this.touchPointElement.ontransitionend=function(){}):(this.createPoint(),this.touchMoveTo(t))},touchMoveTo:function(t){t.ts&&"string"===typeof t.ts&&(t.ts=JSON.parse(t.ts)),this.touchPointElement&&(this.touchPointElement.style.left=t.ts.cx+"px",this.touchPointElement.style.top=t.ts.cy+"px")},touchEnd:function(){var t=this;this.touchPointElement&&setTimeout((function(){t.touchPointElement&&(t.touchPointElement.hidden=!0)}),1e3)},click:function(){var t=this;this.timer.click&&window.clearTimeout(this.timer.click),this.touchPointElement&&(this.touchPointElement.style.background="rgb(255, 186, 21, .5)",this.timer.click=window.setTimeout((function(){t.touchPointElement.style.background="rgba(8, 139, 243, .5)",t.timer.click=null}),500))},input:function(t){if(t.ce){var e=this.iframeWindow.$(this.getElementByXpath(t.ce.x));e[0].focus(),e.val(t.ce.v+"")}},createPoint:function(){var t=this.iframeDocument.createElement("div");t.className="hand-pointer",document.querySelector("#client-mask").appendChild(t),this.touchPointElement=t},resetWindow:function(){var t=document.querySelector("#myiframe");t&&(this.iframeWindow=t.contentWindow)},play:function(){var t=this;this.resetIframe(),this.showPrgress=!1,this.$nextTick().then((function(){t.showPrgress=!0})),this.playConfig.timer||(this.renderIframe(),this.playConfig.timer=setInterval((function(){t.renderIframe()}),this.playConfig.frameTime))},stop:function(){this.playConfig.timer&&(window.clearInterval(this.playConfig.timer),this.playConfig.timer=null)},resetIframe:function(){this.touchEnd(),this.touchPointElement=null,this.playConfig.currentTime=this.playConfig.startTime,this.resetWindow(),this.iframeWindow.location.reload(),this.scroll(0,"instant")}},created:function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)})));function e(){return t.apply(this,arguments)}return e}(),mounted:function(){},beforeDestroy:function(){this.stop()}},g=p,y=(i("8406"),i("a475"),i("2877")),v=Object(y["a"])(g,s,o,!1,null,"0f7fffeb",null),C=v.exports,b=i("2f62"),w=i("23ae");function A(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function E(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?A(i,!0).forEach((function(e){Object(r["a"])(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):A(i).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}var k={components:{PageReplay:C},computed:E({},Object(b["b"])(["landingPages"]),{currentPageId:{get:function(){return this.$store.state.currentLandingPageId},set:function(t){this.$store.commit("setCurrentLandingPageId",t)}},currentPageUrl:function(){var t=this,e=this.landingPages.find((function(e){return e.id===t.currentPageId}));return console.log(e),e?e.url:""}}),data:function(){return{query:{uid:null,id:null},conversionDetail:{}}},methods:{getDetail:function(){var t=this;Object(w["S"])({id:this.query.id}).then((function(e){console.log(e),e&&e.vistedTime&&(e.vistedTime=Object(h["a"])(new Date(e.vistedTime),"yyyy-MM-dd hh:MM:ss")),e=e||{},t.conversionDetail=e}))}},created:function(){var t=this.$route.query,e=t.uid,i=t.id,n=t.pageId;this.currentPageId=parseInt(n),this.query.uid=e,this.query.id=parseInt(i),this.getDetail()}},T=k,D=(i("2de2"),Object(y["a"])(T,n,a,!1,null,"4a9411aa",null));e["default"]=D.exports},8406:function(t,e,i){"use strict";var n=i("e0b2"),a=i.n(n);a.a},a475:function(t,e,i){"use strict";var n=i("398e"),a=i.n(n);a.a},c4bf:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACYAAAAsCAYAAAAJpsrIAAACzElEQVRYR83ZTU8TQRgH8P9/upgCSgwHD8YTGq4eNZGLn8B44Su0QFCr0O7WiOIbAU0NXLQHEw7GaLgQDyZED77ExDQxQRPRgxJjiBrkHcGyLYyh3bYEod12X7p72cPuzPzy7DM7O88SxnEoJmundVyVEicAJHxELKnye+6622fmBlT65CikPJUHkCsALrccx+CLk0xXBdY4JBuWVjAHKX3bASTfQyCYivCtm7hMxPx9sikt5dfdB+YGgXh9LaILIS64ATQJMyjkL0GEdJWPnMaVBysk4DOfgra1MItE2Rq9QtjmoExC4EZzEwYmWqlbY/zf2gIs2xnBz1JBMB3mSztxlmE5DMlhfw26l7s4YwfQNlg2fJylRLeuYZiktAK0F5abvOBr7kFQ7+JEpThHYEb0UkLi1gE/rk+d599ygc7B8q8+TgqifU3lWDk4x2FbJsfjGj9CqyH+NAN0DWY83kUC0Ysq7l0hN4oB3YUVJkcCCgKpMMd3w1UFZkRvncDQ/gb0/O7gn+3A6sEKyTclBDr1CEe34qoPKwCfKERn7qvZO7DsyrFC4FJK4x1vwYzoCbLfkzCQy16FzXsTJhjxFoycEcRZXeVDb8BISWLYv4Hu5Shns1/GprZvZpbdyu4h+UkSwbTKVx55wTIJ4mbzYfTvtJmpTsTI5z6gbU3jF28s4uS0IC7oKh+UevDuRGwzuYH7dUB4UeN8KZQryU/yo/QhkA7zjRlQfk13bFYyswG5drQRt98FmCoH5WDEOKYQ7UmNk+WCnImYjdUge5I/m9zxej80u+pnlmEEP8CHgN0VRwswrkKgt+UYYk7UaCuDkU8VoCOp8VulyV2qXXkw8ocAzukaR0p1bPW6SVimOHx3315E585wyeqgZtpnYEXL6eC4kdwJMx3adU8Gtnns+ANCouf0EQyOtHLdrgHN9pOHHYzLupl59Hrll80/nKaZRZiEY9QAAAAASUVORK5CYII="},e0b2:function(t,e,i){},f3f6:function(t,e,i){t.exports=i.p+"163h5/img/empty.7a29235b.png"}}]);