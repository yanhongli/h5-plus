(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-22195a6d"],{2240:function(e,t,a){},"2f21":function(e,t,a){"use strict";var n=a("79e5");e.exports=function(e,t){return!!e&&n((function(){t?e.call(null,(function(){}),1):e.call(null)}))}},"494e":function(e,t,a){},"55dd":function(e,t,a){"use strict";var n=a("5ca1"),i=a("d8e8"),r=a("4bf8"),o=a("79e5"),s=[].sort,l=[1,2,3];n(n.P+n.F*(o((function(){l.sort(void 0)}))||!o((function(){l.sort(null)}))||!a("2f21")(s)),"Array",{sort:function(e){return void 0===e?s.call(r(this)):s.call(r(this),i(e))}})},"5d3c":function(e,t,a){e.exports=a.p+"163h5/img/init_icon_1.8ec28595.png"},"5df3":function(e,t,a){"use strict";var n=a("02f4")(!0);a("01f9")(String,"String",(function(e){this._t=String(e),this._i=0}),(function(){var e,t=this._t,a=this._i;return a>=t.length?{value:void 0,done:!0}:(e=n(t,a),this._i+=e.length,{value:e,done:!1})}))},"748a":function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"host"})},i=[],r=a("313e"),o=a.n(r),s={data:function(){return{chart:null}},props:{data:{titleText:"",seriesName:"",legendData:[],seriesData:[]},xFormatter:null},methods:{resizeHandle:function(){this.chart&&this.chart.resize()},drawChart:function(){var e=o.a.init(this.$el);this.chart=e;var t={title:{text:this.data.titleText,show:!1,x:"center",textStyle:{fontSize:"14",fontweight:"500",color:"rgba(46,48,57,1)",lineHeight:"20"}},tooltip:{trigger:"item"},series:[{type:"pie",radius:"55%",center:["50%","60%"],name:this.data.seriesName,data:this.data.seriesData,label:{formatter:"{b} \n\n {d}%"},itemStyle:{emphasis:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]};e.setOption(t),this.chart.resize()}},watch:{data:"drawChart"},beforeDestroy:function(){window.removeEventListener("resize",this.resizeHandle)},mounted:function(){this.drawChart(),window.addEventListener("resize",this.resizeHandle.bind(this))}},l=s,c=(a("dc53"),a("2877")),d=Object(c["a"])(l,n,i,!1,null,"57cfd9e4",null);t["a"]=d.exports},9922:function(e,t,a){"use strict";a.d(t,"a",(function(){return f}));var n=a("e7f2"),i=a("7677"),r=a("1212"),o=a("3683"),s=a("2a96"),l=a.n(s),c=a("d6e9"),d=a("5dea"),u=a("6ca7"),m=l()(),h=Object(c["a"])((new Date).setFullYear(2019));function f(e){return{dialog:{config:{model:{},visible:!1},del:{model:{},visible:!1},eventName:{model:{conversionName:{value:"",error:""},id:{value:"",error:""}},visible:!1}},selects:[{key:"status",value:"-1",list:[{value:"-1",label:"全部未删除"},{value:"0",label:"活跃"},{value:"1",label:"未活跃"},{value:"2",label:"已删除"}]},{key:"mode",value:"-1",list:[{value:"-1",label:"全部监测方式"},{value:"0",label:"JS部码"},{value:"1",label:"XPath"}]}],eventInput:"",pickerOptions:{shortcuts:n["a"],disabledDate:function(t){return Object(r["a"])(t,m)||Object(i["a"])(t,h)||e.checkedStartDate&&Math.abs(Object(o["a"])(t,e.checkedStartDate))>89},onPick:function(t){var a=t.maxDate,n=t.minDate;e.checkedStartDate=a||n}},dateRange:[Object(d["a"])(Object(u["a"])(),6),Object(u["a"])()],tableData:[],tableColumns:["id","conversionName","status","conversionTypeName","mode","landingPageName","url","browse","visitor","conversionAmount","createTime","operate"],customStates:{id:{name:"事件ID",checked:!1,tempChecked:!1,width:120},conversionName:{name:"事件名称",checked:!0,tempChecked:!0,width:250},status:{name:"状态",checked:!0,tempChecked:!0,width:110},conversionTypeName:{name:"事件类型",checked:!0,tempChecked:!0,width:120},mode:{name:"监测方式",checked:!0,tempChecked:!0,width:120},landingPageName:{name:"落地页名称",checked:!0,tempChecked:!0,width:180},url:{name:"落地页URL",checked:!1,tempChecked:!1,width:120},browse:{name:"浏览量",checked:!0,tempChecked:!0,width:120},visitor:{name:"访问量",checked:!0,tempChecked:!0,width:120},conversionAmount:{name:"转化量",checked:!0,tempChecked:!0,width:120},createTime:{name:"创建时间",checked:!0,tempChecked:!0,width:200},operate:{name:"操作",checked:!0,tempChecked:!0,width:"auto",minWidth:240},fInfo:{name:"事件信息",checked:!0,tempChecked:!0},sInfo:{name:"基础指标",checked:!0,tempChecked:!0}},customGroups:[{key:"fInfo",isIndeterminate:!1,children:["id","conversionName","status","conversionTypeName","mode","landingPageName","url","createTime"]},{key:"sInfo",isIndeterminate:!1,children:["browse","visitor","conversionAmount"]}],page:{size:10,current:1,total:0},conversionNameEdition:{id:"",value:""}}}},d80b:function(e,t,a){"use strict";a.d(t,"d",(function(){return l})),a.d(t,"a",(function(){return c})),a.d(t,"c",(function(){return d})),a.d(t,"b",(function(){return h}));a("8e6e"),a("ac6a"),a("456d");var n=a("75fc"),i=a("bd86"),r=a("9922");function o(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function s(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?o(a,!0).forEach((function(t){Object(i["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function l(){return{model:"0",list:[{label:"浏览量",value:"0"},{label:"访客量",value:"1"},{label:"转化量",value:"2"}]}}function c(){return[{id:"pv",name:"浏览量",sortable:!0,numberFormat:!0},{id:"uv",name:"访客量",sortable:!0,numberFormat:!0},{id:"ruv",name:"重复访客量",sortable:!0,numberFormat:!0,width:110},{id:"ruvRate",name:"重复访客率",sortable:!0,numberFormat:!0,fixedFormat:"0.0",unit:"%",width:110},{id:"converts",name:"转化量",sortable:!0,numberFormat:!0},{id:"convertRate",name:"转化率",sortable:!0,numberFormat:!0,fixedFormat:"0.0",unit:"%"},{id:"stayTimeAvg",name:"平均停留时长",sortable:!0,numberFormat:!0,fixedFormat:"0.0",width:120},{id:"bounce",name:"跳出量",sortable:!0,numberFormat:!0},{id:"bounceRate",name:"跳出率",sortable:!0,numberFormat:!0,fixedFormat:"0.0",unit:"%"}]}function d(){return{page:{size:10,current:1,total:0},order:{sort:"pv",dir:"desc"}}}var u={0:"操作系统",1:"用户来源",3:"品牌型号"};function m(e){var t=u[e];return{visited:!1,label:t,name:e,quantification:l(),charts:{titleText:t+"浏览量分布",seriesName:"浏览量",seriesData:[]},tops:{legend:"",columns:[{id:"dimensionValue",name:t,width:120},{id:"quotaValue",name:"浏览量",width:80,numberFormat:!0},{id:"proportion",name:t+"占比（%）",width:160,numberFormat:!0,fixedFormat:"0.0"}],rows:[]},details:s({columns:[{id:"dimensionValue",name:t}].concat(Object(n["a"])(c())),rows:[]},d())}}function h(e){var t=Object(r["a"])(e);return{loading:!1,pickerOptions:t.pickerOptions,dateRange:t.dateRange,landingPages:{model:"",list:[]},tabIndex:"1",tabs:[m("1"),m("0"),m("3")]}}},dc53:function(e,t,a){"use strict";var n=a("494e"),i=a.n(n);i.a},f0d9a:function(e,t,a){"use strict";var n=a("2240"),i=a.n(n);i.a},f6c2:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"main"},[n("el-card",[n("el-row",{staticClass:"inputs",attrs:{type:"flex"}},[n("div",[n("label",[e._v("落地页：")]),n("el-select",{staticClass:"search-input mr-30",attrs:{placeholder:"请选择",size:"small"},model:{value:e.landingPages.model,callback:function(t){e.$set(e.landingPages,"model",t)},expression:"landingPages.model"}},e._l(e.landingPages.list,(function(e){return n("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),n("div",[n("label",[e._v("日期：")]),n("el-date-picker",{staticClass:"mr-30",staticStyle:{width:"250px"},attrs:{clearable:!1,type:"daterange",pickerOptions:e.pickerOptions,align:"right",placeholder:"选择日期",size:"small",format:"yyyy.MM.dd"},model:{value:e.dateRange,callback:function(t){e.dateRange=t},expression:"dateRange"}}),n("el-button",{staticClass:"mr-10 btn-n-width",attrs:{disabled:e.loading,type:"primary",size:"small"},on:{click:function(t){return e.search()}}},[e._v("查询")])],1)]),n("el-row",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}]},[n("el-tabs",{on:{"tab-click":e.tabClick},model:{value:e.tabIndex,callback:function(t){e.tabIndex=t},expression:"tabIndex"}},e._l(e.tabs,(function(t){return n("el-tab-pane",{key:t.name,attrs:{label:t.label,name:t.name}},[n("el-row",{attrs:{type:"flex"}},[n("el-radio-group",{on:{change:function(a){return e.quantificationChange(t)}},model:{value:t.quantification.model,callback:function(a){e.$set(t.quantification,"model",a)},expression:"tab.quantification.model"}},e._l(t.quantification.list,(function(t){return n("el-radio",{key:t.value,attrs:{label:t.value}},[e._v(e._s(t.label))])})),1)],1),n("el-row",{staticStyle:{"margin-top":"20px"},attrs:{type:"flex",justify:"center"}},[n("div",{staticClass:"chart-region"},[n("div",{staticClass:"chart-title"},[e._v(e._s(t.charts.titleText))]),t.charts.seriesData.length<=0?[n("div",{staticClass:"text-center mt-50"},[n("img",{attrs:{src:a("5d3c"),alt:""}}),n("div",{staticClass:"mt-10 data-none"},[e._v("暂无数据")])])]:[n("PieChart",{attrs:{data:t.charts}})]],2),n("div",{staticClass:"top-list"},[n("div",{staticClass:"legend"},[e._v(e._s(t.tops.legend))]),n("el-table",{attrs:{data:t.tops.rows}},[n("el-table-column",{attrs:{label:"序号",type:"index"}}),e._l(t.tops.columns,(function(t){return n("el-table-column",{key:t.id,attrs:{prop:t.id,label:t.name,sortable:t.sortable,width:t.width},scopedSlots:e._u([{key:"default",fn:function(a){return[t.numberFormat?[e._v(e._s(e._f("numFormat")(a.row[t.id],t.fixedFormat)))]:[e._v(e._s(a.row[t.id]))]]}}],null,!0)})}))],2)],1)]),n("el-row",{attrs:{type:"flex",justify:"end"}},[n("el-button",{attrs:{disabled:e.loading,type:"primary",size:"small"},on:{click:function(t){return e.exportCSV()}}},[e._v("导出CSV")])],1),n("el-row",[n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{data:t.details.rows},on:{"sort-change":e.sortChange}},e._l(t.details.columns,(function(t){return n("el-table-column",{key:t.id,attrs:{prop:t.id,label:t.name,sortable:t.sortable,width:t.width},scopedSlots:e._u([{key:"default",fn:function(a){return[t.numberFormat?[e._v(e._s(e._f("numFormat")(a.row[t.id],t.fixedFormat))+e._s(t.unit))]:[e._v(e._s(a.row[t.id]))]]}}],null,!0)})})),1),n("div",{staticClass:"mt-20"},[n("el-pagination",{attrs:{"page-sizes":[10,20,50,100],"page-size":t.details.page.size,"current-page":t.details.page.current,layout:"total, sizes, jumper,pager",total:t.details.page.total},on:{"size-change":function(t){return e.getTableData(!0)},"current-change":function(t){return e.getTableData(!1)},"update:pageSize":function(a){return e.$set(t.details.page,"size",a)},"update:page-size":function(a){return e.$set(t.details.page,"size",a)},"update:currentPage":function(a){return e.$set(t.details.page,"current",a)},"update:current-page":function(a){return e.$set(t.details.page,"current",a)}}})],1)],1)],1)})),1)],1)],1)],1)])},i=[],r=(a("8e6e"),a("456d"),a("55dd"),a("7f7f"),a("7514"),a("75fc")),o=(a("a481"),a("5df3"),a("ac6a"),a("386d"),a("bd86")),s=a("d80b"),l=a("23ae"),c=a("748a"),d=a("b166");function u(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function m(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?u(a,!0).forEach((function(t){Object(o["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):u(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var h={components:{PieChart:c["a"]},data:function(){return m({},Object(s["b"])(this))},methods:{tabClick:function(){var e=this.getCondition(),t=e.tab;t.visited||this.search()},quantificationChange:function(){this.eViews(),this.eTopList()},search:function(){var e=this;this.loading=!0,this.tabs.forEach((function(e){return e.visited=!1})),Promise.all([this.eViews(),this.eTopList(),this.getTableData(!0)]).finally((function(t){e.loading=!1}))},sortChange:function(e){var t=this.getCondition(),a=t.page,n=t.order;a.current=1,Object.assign(n,{sort:e.prop,dir:(e.order||"").replace("ending","")}),this.eList()},eList:function(){var e=this.getCondition(),t=e.condition,a=e.page,n=e.rows,i=e.tab;return i.visited=!0,Object(l["h"])(t).then((function(e){a.total=e.total,n.length=0,n.push.apply(n,Object(r["a"])(e.list))}))},eTopList:function(){var e=this.getCondition(),t=e.topRows,a=e.condition,n=e.quantification,i=e.topColumns;return i.find((function(e){return"quotaValue"==e.id})).name=n.label,Object(l["s"])(a).then((function(e){t.length=0,t.push.apply(t,Object(r["a"])(Array.isArray(e)?e:[]))}))},eViews:function(){var e=this,t=this.getCondition(),a=(t.charts,t.condition),n=t.tab,i=t.quantification;return n.tops.legend="".concat(n.label+i.label,"TOP排行"),Object(l["t"])(a).then((function(t){e.setChart(n,i,t.seriesData||[])}))},getTableData:function(e){var t=this.getCondition(),a=t.page;return e&&(a.current=1),this.eList()},getCondition:function(){var e=this,t=this.tabs.find((function(t){return t.name==e.tabIndex})),a=t.quantification.list.find((function(e){return e.value==t.quantification.model})),n=t.tops,i=n.rows,r=n.columns,o=t.details,s=o.page,l=o.rows,c=o.order,u={current:s.current,limit:s.size,landingPageId:this.landingPages.model,sort:c.sort,dir:c.dir.replace("ending",""),quota:a.value,type:this.tabIndex,startTime:Object(d["a"])(this.dateRange[0],"yyyy-MM-dd"),endTime:Object(d["a"])(this.dateRange[1],"yyyy-MM-dd")};return{tab:t,quantification:a,page:s,rows:l,topRows:i,topColumns:r,order:c,charts:t.charts,condition:u}},setChart:function(e,t,a){var n={titleText:"".concat(e.label+t.label,"分布"),seriesName:t.label,seriesData:Object(r["a"])(a)};e.charts=n},exportCSV:function(){Object(l["g"])(this.getCondition().condition)}},mounted:function(){var e=this;Object(l["w"])().then((function(t){var a;e.landingPages.list.length=0,(a=e.landingPages.list).push.apply(a,Object(r["a"])(t.map((function(e){return{label:e.name,value:e.id}})))),e.landingPages.model=e.landingPages.list[0].value,e.search()}))}},f=h,p=(a("f0d9a"),a("2877")),b=Object(p["a"])(f,n,i,!1,null,"c592bf0c",null);t["default"]=b.exports}}]);